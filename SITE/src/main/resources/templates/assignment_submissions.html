<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
  <head>
    <title>Assignment Submissions</title>
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css"
    />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-icons/1.11.1/font/bootstrap-icons.css"
    />
  </head>
  <body>
    <div class="container mt-4">
      <header class="d-flex justify-content-between align-items-center mb-4">
        <h4 th:text="'Submissions for: ' + ${assignment.title}">
          Assignment Title
        </h4>
        <a
          th:href="@{'/staff/student-management/' + ${projectId}}"
          class="btn btn-primary"
          >Back to Project</a
        >
      </header>
      <div
        th:if="${errorMessage}"
        class="alert alert-danger"
        th:text="${errorMessage}"
      ></div>
      <div
        th:if="${successMessage}"
        class="alert alert-success"
        th:text="${successMessage}"
      ></div>
      <div class="card">
        <div class="card-header">
          <h5>Student Submissions</h5>
        </div>
        <div class="card-body">
          <table class="table table-bordered">
            <thead>
              <tr>
                <th>Student Name</th>
                <th>File</th>
                <th>Grade</th>
                <th>Action</th>
              </tr>
            </thead>
            <tbody>
              <tr th:each="submission : ${submissions}">
                <td th:text="${submission.studentName}">Student Name</td>
                <td>
                  <a
                    th:href="@{'/download/' + ${submission.filePath}}"
                    class="btn btn-outline-info btn-sm"
                    target="_blank"
                  >
                    <i class="bi bi-download"></i> Download
                  </a>
                </td>
                <td>
                  <span
                    th:text="${submission.grade != null ? submission.grade : 'Not graded'}"
                  ></span>
                </td>
                <td>
                  <form
                    th:action="@{'/staff/student-management/' + ${projectId} + '/assignments/' + ${assignment.id} + '/submissions/' + ${submission.id} + '/grade'}"
                    method="post"
                    class="d-flex gap-2"
                  >
                    <input
                      type="number"
                      name="grade"
                      step="0.01"
                      min="0"
                      th:placeholder="'Max: ' + ${assignment.maxGrade}"
                      class="form-control form-control-sm"
                      required
                    />
                    <button type="submit" class="btn btn-success btn-sm">
                      <i class="bi bi-check2-circle"></i> Save
                    </button>
                  </form>
                </td>
              </tr>
            </tbody>
          </table>
        </div>
      </div>
    </div>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
  </body>
</html>
